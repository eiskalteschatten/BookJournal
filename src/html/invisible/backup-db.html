<html>
  <script>
        const { createBackup } = require('../../db');
        const {ipcRenderer, remote} = require('electron');
        const BrowserWindow = remote.BrowserWindow;

        ipcRenderer.on('backup-db', async function(event, number, fromWindowId) {
            try {
                const fromWindow = BrowserWindow.fromId(fromWindowId);

                await createBackup();
                fromWindow.webContents.send('db-backup-successful');

                window.close();
            }
            catch(error) {
                console.error(error);
            }
        })
  </script>
</html>
